(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){e.exports=a.p+"static/media/architecture.d3b9be2a.jpg"},135:function(e,t,a){e.exports=a(148)},148:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(15),c=a(10),l=a(185),i=a(195),s=a(197),m=a(196),u=a(34),p=a(107),d=a.n(p),f=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},g=a(205),E=a(218),h=a(187),b=a(6),y=a(125),v=a(189),j=a(150),x=a(190),w=a(192),O=a(191),k=a(220),T=a(193),C=a(7),N="https://postmail-social.herokuapp.com",S=function(e,t,a){return fetch("".concat(N,"/api/users/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},D=function(e,t,a){return fetch("".concat(N,"/api/users/follow/"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,followId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log("FOLLOW FAILED",e)}))},A=function(e,t,a){return fetch("".concat(N,"/api/users/unfollow/"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,unfollowId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},_=a(215),B=a(60),F=(a(104),Object(l.a)((function(e){return{root:e.mixins.gutters({padding:e.spacing(1),marginTop:25}),title:{margin:"".concat(e.spacing(3),"px ").concat(e.spacing(1),"px ").concat(e.spacing(2),"px"),color:e.palette.openTitle,fontSize:"1em",fontWeight:600},avatar:{marginRight:e.spacing(1)},follow:{right:e.spacing(2)},snack:{color:e.palette.protectedTitle},viewButton:{verticalAlign:"middle"}}}))),I=function(){var e=F(),t=Object(n.useState)({users:[],open:!1,followMessage:""}),a=Object(c.a)(t,2),r=a[0],l=a[1],i=f(),s=i.user,m=i.token;Object(n.useEffect)((function(){var e=new AbortController,t=e.signal;return function(e,t,a){return fetch("".concat(N,"/api/users/findPeople/").concat(e),{method:"GET",signal:a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(s._id,m,t).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):l(Object(b.a)(Object(b.a)({},r),{},{users:e}))})),function(){e.abort()}}),[]);var p=function(e,t){D(s._id,m,e._id).then((function(a){if(null===a||void 0===a?void 0:a.error)console.log(a.error);else{var n=r.users;n.splice(t,1),l(Object(b.a)(Object(b.a)({},r),{},{users:n,open:!0,followMessage:"You're following ".concat(e.name," now!")}))}}))},d=function(e){return B.b.info("You're following ".concat(e.name," now!"))};return o.a.createElement("div",null,o.a.createElement(h.a,{maxWidth:"sm"},o.a.createElement(E.a,{mdDown:!0},o.a.createElement(y.a,{className:e.root,elevation:2,style:{maxHeight:500,overflow:"auto"}},o.a.createElement(u.a,{type:"title",className:e.title},"Discover People"),o.a.createElement(v.a,{style:{maxHeight:"100"}},r.users.map((function(t,a){return o.a.createElement("span",{key:a},o.a.createElement(j.a,null,o.a.createElement(C.b,{to:"/user/".concat(t._id)},o.a.createElement(x.a,{className:e.avatar},o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(t._id)}))),o.a.createElement(C.b,{to:"/user/".concat(t._id),style:{textDecoration:"none",color:"#000000",fontWeight:300}},o.a.createElement(O.a,{primary:t.name})),o.a.createElement(w.a,{className:e.follow},o.a.createElement(T.a,{small:!0,disableElevation:!0,"aria-label":"Follow",variant:"contained",color:"primary",onClick:function(){p(t,a),d(t)},style:{textTransform:"none",width:100}},"Follow"))))})))))),o.a.createElement(E.a,{only:["lg","xl"]},o.a.createElement(y.a,{className:e.root,elevation:0,style:{maxHeight:"auto",overflow:"auto",marginTop:45}},o.a.createElement(u.a,{type:"title",className:e.title},"Discover People"),o.a.createElement(v.a,{style:{maxHeight:"auto"}},r.users.map((function(t,a){return o.a.createElement("span",{key:a},o.a.createElement(j.a,null,o.a.createElement(C.b,{to:"/user/".concat(t._id)},o.a.createElement(x.a,{className:e.avatar},o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(t._id)}))),o.a.createElement(C.b,{to:"/user/".concat(t._id),style:{textDecoration:"none",color:"#424242",fontSize:20}},o.a.createElement(O.a,{style:{whiteSpace:"nowrap"},primary:o.a.createElement(_.a,{component:"div",textOverflow:"ellipsis",overflow:"hidden"},o.a.createElement(u.a,{variant:"h6",style:{fontSize:13}},t.name))})),o.a.createElement(w.a,{className:e.follow},o.a.createElement(E.a,{xsDown:!0},o.a.createElement(T.a,{small:!0,disableElevation:!0,"aria-label":"Follow",variant:"contained",color:"primary",onClick:function(){p(t,a),d(t)},style:{textTransform:"none",width:100,height:35}},"Follow")),o.a.createElement(E.a,{smUp:!0},o.a.createElement(T.a,{small:!0,disableElevation:!0,"aria-label":"Follow",variant:"contained",color:"primary",onClick:function(){p(t,a),d(t)},style:{textTransform:"none",width:80,height:30,paddingTop:-8}},"Follow")))))}))))),o.a.createElement(B.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))},z=a(85),P=a(204),L=a(14),U=a(194),H=a(42),W=a.n(H),R=Object(l.a)((function(e){var t,a,n;return{root:{display:"flex",maxWidth:600,margin:"auto",marginBottom:e.spacing(3),marginTop:25},details:{display:"flex",flexDirection:"column"},heading:(t={},Object(L.a)(t,e.breakpoints.down("xs"),{fontSize:"20px"}),Object(L.a)(t,e.breakpoints.up("lg"),{paddingLeft:5}),t),subtitle:(a={},Object(L.a)(a,e.breakpoints.down("xs"),{fontSize:"10px",paddingTop:2}),Object(L.a)(a,e.breakpoints.up("lg"),{paddingLeft:5}),a),content:{flex:"1 0 auto"},cover:(n={width:151},Object(L.a)(n,e.breakpoints.down("xs"),{width:110}),Object(L.a)(n,e.breakpoints.up("lg"),{width:170}),n),controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(2),paddingBottom:e.spacing(2)},button:Object(L.a)({},e.breakpoints.down("xs"),{fontSize:"10px"})}})),J=function(){var e=R(),t=Object(n.useState)({user:{}}),a=Object(c.a)(t,2),r=a[0],l=a[1],p=f();p.user,p.token;Object(n.useEffect)((function(){l(Object(b.a)(Object(b.a)({},r),{},{user:f().user}))}),[]);var d=r.user._id?"".concat(N,"/api/users/photo/").concat(r.user._id,"?").concat((new Date).getTime()):o.a.createElement(U.a,null,o.a.createElement(W.a,null));return o.a.createElement(i.a,{className:e.root},o.a.createElement(m.a,{className:e.cover,image:d,title:"Live from space album cover"}),o.a.createElement("div",{className:e.details},o.a.createElement(s.a,{className:e.content},o.a.createElement(u.a,{component:"h5",variant:"h5",className:e.heading},"Hi, ".concat(r.user.name)),o.a.createElement(u.a,{variant:"subtitle1",color:"textSecondary",className:e.subtitle},"What are you thinking about?")),o.a.createElement("div",{className:e.controls},o.a.createElement(C.b,{to:"post/create",style:{textDecoration:"none"}},o.a.createElement(T.a,{variant:"contained",color:"primary",disableElevation:!0,style:{textTransform:"none"},className:e.button},"Share your thoughts")))))},G=function(e,t,a){return fetch("".concat(N,"/api/posts/feed/").concat(e),{method:"GET",signal:a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},M=function(e,t,a){return fetch("".concat(N,"/api/posts/like"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},K=function(e,t,a){return fetch("".concat(N,"/api/posts/unlike"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},V=function(e,t,a,n){return fetch("".concat(N,"/api/posts/comment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Y=function(e,t,a,n){return fetch("".concat(N,"/api/posts/uncomment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},q=a(111),Q=a.n(q),X=a(198),Z=a(201),$=a(68),ee=a.n($),te=a(113),ae=a.n(te),ne=a(114),oe=a.n(ne),re=a(219),ce=a(203),le=a(200),ie=a(202),se=a(199),me=a(214),ue=a(62),pe=a.n(ue),de=a(221),fe=Object(l.a)((function(e){return{cardHeader:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},smallAvatar:{width:25,height:25},commentField:{width:"96%"},commentText:{backgroundColor:"white",padding:e.spacing(1),margin:"2px ".concat(e.spacing(2),"px 2px 2px")},commentDate:{display:"block",color:"gray",fontSize:"0.8em"},commentDelete:{fontSize:"1.1em",cursor:"pointer",float:"right",color:e.palette.grey[500]},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),ge=function(e){var t=e.postId,a=e.updateComments,r=e.comments,l=fe(),i=Object(n.useState)(""),s=Object(c.a)(i,2),m=s[0],p=s[1],d=f(),g=d.user,E=d.token,h=o.a.useState(!1),b=Object(c.a)(h,2),y=b[0],v=b[1],j=function(){v(!1)},x=function(e){p(e.target.value)},w=function(e){13===e.keyCode&&e.target.value&&(e.preventDefault(),V(g._id,E,t,{text:m}).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):(p(""),a(e.comments),v(!0))})))},O=function(e){return o.a.createElement("p",{className:l.commentText,style:{backgroundColor:"#fafafa"}},o.a.createElement("span",{style:{display:"block"}},o.a.createElement(C.b,{to:"/user/".concat(e.postedBy._id),style:{textDecoration:"none"}},e.postedBy.name),f().user._id===e.postedBy._id&&o.a.createElement(pe.a,{onClick:(n=e,function(e){Y(g._id,E,t,n).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):a(e.comments)}))}),className:l.commentDelete})),o.a.createElement("span",null,o.a.createElement(u.a,null,e.text)),o.a.createElement("span",{className:l.commentDate},o.a.createElement(u.a,{variant:"caption"},new Date(e.created).toLocaleString("default",{month:"long",day:"2-digit"}))));var n};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(X.a,{style:{backgroundColor:"#ffffff"},avatar:o.a.createElement(k.a,{className:l.smallAvatar,src:"".concat(N,"/api/users/photo/").concat(f().user._id)}),title:o.a.createElement(de.a,{inputProps:{"aria-label":"naked"},onKeyDown:w,multiline:!0,value:m,onChange:x,placeholder:"Add a comment...",className:l.commentField,margin:"normal"}),className:l.cardHeader})),o.a.createElement(re.a,{fullWidth:"true",maxWidth:"sm",scroll:"paper",open:y,onClose:j,"aria-labelledby":"form-dialog-title"},o.a.createElement(se.a,{id:"form-dialog-title"},"Comments"),o.a.createElement(U.a,{"aria-label":"close",className:l.closeButton,onClick:j},o.a.createElement(pe.a,null)),o.a.createElement(le.a,null,r.map((function(e,t){return o.a.createElement(X.a,{avatar:o.a.createElement(k.a,{className:l.smallAvatar,src:"".concat(N,"/api/users/photo/").concat(e.postedBy._id)}),title:O(e),className:l.cardHeader,key:t})}))),o.a.createElement(X.a,{avatar:o.a.createElement(k.a,{className:l.smallAvatar,src:"".concat(N,"/api/users/photo/").concat(f().user._id)}),title:o.a.createElement(me.a,{autoFocus:!0,onKeyDown:w,multiline:!0,value:m,onChange:x,placeholder:"Add a comment...",className:l.commentField,margin:"normal"}),className:l.cardHeader})))},Ee=a(112),he=a.n(Ee),be=Object(l.a)((function(e){return{cardHeader:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},smallAvatar:{width:25,height:25},commentField:{width:"96%"},commentText:{backgroundColor:"white",padding:e.spacing(1),margin:"2px ".concat(e.spacing(2),"px 2px 2px")},commentDate:{display:"block",color:"gray",fontSize:"0.8em"},commentDelete:{fontSize:"1.1em",cursor:"pointer",float:"right",color:e.palette.grey[500]},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},button:Object(L.a)({marginTop:e.spacing(-2),width:33,height:33},e.breakpoints.down("xs"),{marginTop:e.spacing(0)}),commentIcon:Object(L.a)({},e.breakpoints.down("xs"),{marginTop:-3})}})),ye=function(e){var t=e.postId,a=e.updateComments,r=e.comments,l=be(),i=Object(n.useState)(""),s=Object(c.a)(i,2),m=s[0],p=s[1],d=f(),g=d.user,E=d.token,h=o.a.useState(!1),b=Object(c.a)(h,2),y=b[0],v=b[1],j=function(){v(!1)},x=function(e){return o.a.createElement("p",{className:l.commentText,style:{backgroundColor:"#fafafa"}},o.a.createElement("span",{style:{display:"block"}},o.a.createElement(C.b,{to:"/user/".concat(e.postedBy._id),style:{textDecoration:"none"}},e.postedBy.name),f().user._id===e.postedBy._id&&o.a.createElement(pe.a,{onClick:(n=e,function(e){Y(g._id,E,t,n).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):a(e.comments)}))}),className:l.commentDelete})),o.a.createElement("span",null,o.a.createElement(u.a,null,e.text)),o.a.createElement("span",{className:l.commentDate},o.a.createElement(u.a,{variant:"caption"},new Date(e.created).toLocaleString("default",{month:"long",day:"2-digit"}))));var n};return o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,{className:l.button,"aria-label":"Comment",style:{color:"#42a5f5"},onClick:function(){return v(!0)}},o.a.createElement(he.a,{style:{fontSize:19},className:l.commentIcon})),o.a.createElement(re.a,{fullWidth:"true",maxWidth:"sm",scroll:"paper",open:y,onClose:j,"aria-labelledby":"form-dialog-title"},o.a.createElement(se.a,{id:"form-dialog-title"},"Comments"),o.a.createElement(U.a,{"aria-label":"close",className:l.closeButton,onClick:j},o.a.createElement(pe.a,null)),o.a.createElement(le.a,null,r.map((function(e,t){return o.a.createElement(X.a,{avatar:o.a.createElement(k.a,{className:l.smallAvatar,src:"".concat(N,"/api/users/photo/").concat(e.postedBy._id)}),title:x(e),className:l.cardHeader,key:t})}))),o.a.createElement(X.a,{avatar:o.a.createElement(k.a,{className:l.smallAvatar,src:"".concat(N,"/api/users/photo/").concat(f().user._id)}),title:o.a.createElement(me.a,{autoFocus:!0,onKeyDown:function(e){13===e.keyCode&&e.target.value&&(e.preventDefault(),V(g._id,E,t,{text:m}).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):(p(""),a(e.comments))})))},multiline:!0,value:m,onChange:function(e){p(e.target.value)},placeholder:"Add a comment...",className:l.commentField,margin:"normal"}),className:l.cardHeader})))},ve=(a(106),Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",marginBottom:e.spacing(2),backgroundColor:"rgba(0, 0, 0, 0.06)",boxShadow:"none",border:1,borderColor:"#f5f5f5",borderStyle:"solid"},cardContent:{backgroundColor:"white",padding:"".concat(e.spacing(2),"px 0px")},cardHeader:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},text:{margin:e.spacing(2),marginTop:-5},photo:{backgroundColor:"#ffffff",padding:e.spacing(0)},media:{height:0,paddingTop:"56.25%"},button:Object(L.a)({marginTop:e.spacing(-2),width:33,height:33},e.breakpoints.down("xs"),{marginTop:e.spacing(0)}),likes:Object(L.a)({marginTop:e.spacing(-2),color:"#757575",fontSize:14},e.breakpoints.down("xs"),{marginTop:e.spacing(0)}),likeIcon:Object(L.a)({},e.breakpoints.down("xs"),{marginTop:-4}),comments:Object(L.a)({marginTop:e.spacing(-2),color:"#757575",fontSize:12},e.breakpoints.down("xs"),{marginTop:e.spacing(0)}),subheader:{fontSize:10}}}))),je=Object(r.g)((function(e){var t,a=e.post,l=e.onRemove,p=e.history,d=ve(),g=f(),E=g.user,h=g.token,y=Object(n.useState)(!1),v=Object(c.a)(y,2),j=v[0],x=v[1],w=Object(n.useState)(!1),O=Object(c.a)(w,2),S=O[0],D=O[1],A=function(){x(!1)},_=Object(n.useState)({like:(t=a.likes,-1!==t.indexOf(E._id)),likes:a.likes.length,comments:a.comments}),B=Object(c.a)(_,2),F=B[0],I=B[1],z=function(){(F.like?K:M)(E._id,h,a._id).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):I(Object(b.a)(Object(b.a)({},F),{},{like:!F.like,likes:e.likes.length}))}))},P=function(e){I(Object(b.a)(Object(b.a)({},F),{},{comments:e}))};return Object(n.useEffect)((function(){}),[S]),S?o.a.createElement(r.a,{to:"/"}):o.a.createElement("div",null,o.a.createElement(i.a,{className:d.card},o.a.createElement(X.a,{style:{backgroundColor:"#f5f5f5"},avatar:o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(a.postedBy._id,"?").concat((new Date).getTime())}),action:a.postedBy._id===f().user._id&&p.location.pathname==="/user/".concat(E._id)&&o.a.createElement(U.a,{onClick:function(){x(!0)}},o.a.createElement(ee.a,null)),title:o.a.createElement(C.b,{to:"/user/".concat(a.postedBy._id),style:{textDecoration:"none",color:"#000000",fontSize:15}},a.postedBy.name),subheader:o.a.createElement(u.a,{variant:"caption"},new Date(a.createdAt).toLocaleString("default",{month:"long",day:"2-digit"})),className:d.cardHeader}),a.photo&&o.a.createElement("div",{className:d.photo},o.a.createElement(m.a,{className:d.media,image:"".concat(N,"/api/posts/photo/").concat(a._id)})),o.a.createElement(s.a,{className:d.cardContent},o.a.createElement(u.a,{component:"p",className:d.text},o.a.createElement(Q.a,{text:a.text,readMoreText:"...more",max:500}))),o.a.createElement(Z.a,{style:{backgroundColor:"#ffffff"}},F.like?o.a.createElement(U.a,{onClick:z,className:d.button,"aria-label":"Like",color:"secondary"},o.a.createElement(ae.a,{style:{fontSize:20},className:d.likeIcon})):o.a.createElement(U.a,{onClick:z,className:d.button,"aria-label":"Unlike",style:{color:"#42a5f5"}},o.a.createElement(oe.a,{style:{fontSize:20},className:d.likeIcon})),o.a.createElement(u.a,{component:"p",className:d.likes},F.likes),o.a.createElement(ye,{postId:a._id,comments:F.comments,updateComments:P}),o.a.createElement(u.a,{component:"p",className:d.comments,variant:"caption"},0===F.comments.length?o.a.createElement(u.a,{component:"p"},F.comments.length):1===F.comments.length?"View ".concat(F.comments.length," comment"):"View all ".concat(F.comments.length," comments"))),o.a.createElement(ge,{postId:a._id,comments:F.comments,updateComments:P})),o.a.createElement(re.a,{open:j,onClose:A},o.a.createElement(se.a,null,"Delete Post"),o.a.createElement(le.a,null,o.a.createElement(ie.a,null,"Confirm to delete your post.")),o.a.createElement(ce.a,null,o.a.createElement(T.a,{onClick:A,color:"primary"},"Cancel"),o.a.createElement(T.a,{onClick:function(){(function(e,t){return fetch("".concat(N,"/api/posts/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(a._id,h).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):(l(a),D(!0))}))},color:"secondary",autoFocus:"autoFocus"},"Confirm"))))})),xe=function(e){var t=e.posts,a=e.removeUpdate;return o.a.createElement("div",{style:{marginTop:"24px"}},t&&t.map((function(e,t){return o.a.createElement(je,{post:e,key:t,onRemove:a})})))},we=Object(l.a)((function(e){return{card:{margin:"auto",paddingTop:0,paddingBottom:e.spacing(3)},title:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2.5),"px ").concat(e.spacing(2),"px"),color:e.palette.openTitle,fontSize:"1.2em"},media:{minHeight:330}}})),Oe=function(){var e=we(),t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],l=a[1],i=f(),s=i.user,m=i.token;Object(n.useEffect)((function(){var e=new AbortController,t=e.signal;return G(s._id,m,t).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):l(e)})),function(){e.abort()}}),[]);return o.a.createElement("div",null,o.a.createElement(J,null),o.a.createElement(u.a,{type:"title",className:e.title},"PostFeed"),o.a.createElement(P.a,null),o.a.createElement("div",{style:{minHeight:300}},o.a.createElement("div",{style:{marginTop:"24px"}},o.a.createElement(xe,{removeUpdate:function(e){var t=Object(z.a)(r),a=t.indexOf(e);t.splice(a,1),l(t)},posts:r}))))},ke=Object(l.a)((function(e){return{root:{flexGrow:1,margin:30,paddingTop:55},card:{maxWidth:600,margin:"auto",marginTop:e.spacing(5),marginBottom:e.spacing(5)},title:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2.5),"px ").concat(e.spacing(2),"px"),color:e.palette.text.secondary},media:{minHeight:400},credit:{padding:10,textAlign:"right",backgroundColor:"#ededed",borderBottom:"1px solid #d0d0d0","& a":{color:"#3f4771"}}}})),Te=function(e){var t=e.history,a=ke(),r=Object(n.useState)(!1),l=Object(c.a)(r,2),p=l[0],b=l[1];return Object(n.useEffect)((function(){b(f());var e=t.listen((function(){b(f())}));return function(){e()}}),[]),o.a.createElement("div",{className:a.root},!p&&o.a.createElement(g.a,{container:!0,spacing:8},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(i.a,{className:a.card},o.a.createElement(u.a,{variant:"h6",className:a.title},"Home Page"),o.a.createElement(m.a,{className:a.media,image:d.a,title:"Unicorn Bicycle"}),o.a.createElement(u.a,{variant:"body2",component:"p",className:a.credit,color:"textSecondary"},"Photo by"," ",o.a.createElement("a",{href:"https://unsplash.com/@boudewijn_huysmans",target:"_blank",rel:"noopener noreferrer"},"Boudewijn Huysmans")," ","on Unsplash"),o.a.createElement(s.a,null,o.a.createElement(u.a,{type:"body1",component:"p"},"Welcome to the MERN Social home page."))))),p&&o.a.createElement("div",null,o.a.createElement(E.a,{mdDown:!0},o.a.createElement(h.a,{maxwidth:"sm"},o.a.createElement(g.a,{container:!0,spacing:8},o.a.createElement(g.a,{item:!0,xs:12,sm:12,lg:7},o.a.createElement(Oe,null)),o.a.createElement(g.a,{item:!0,xs:12,sm:12,lg:5},o.a.createElement(I,null))))),o.a.createElement(E.a,{lgUp:!0},o.a.createElement(g.a,{container:!0,spacing:8},o.a.createElement(g.a,{item:!0,xs:12,sm:12,lg:7},o.a.createElement(Oe,null))))))},Ce=a(115),Ne=a.n(Ce),Se=Object(l.a)((function(e){return{root:e.mixins.gutters({padding:e.spacing(1),margin:e.spacing(5)}),title:{margin:"".concat(e.spacing(4),"px 0 ").concat(e.spacing(2),"px"),color:e.palette.openTitle},bigAvatar:{width:40,height:40,margin:10}}})),De=function(){var e=Se(),t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],i=a[1];return Object(n.useEffect)((function(){fetch("".concat(N,"/api/users/"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):i(e)}))}),[]),o.a.createElement("div",null,f().user?o.a.createElement(y.a,{className:e.root,elevation:4},o.a.createElement(u.a,{variant:"h6",className:e.title},"All Users"),o.a.createElement(v.a,{dense:!0},l&&l.map((function(t,a){return o.a.createElement(C.b,{to:"/user/".concat(t._id),key:a,style:{textDecoration:"none"}},o.a.createElement(j.a,{button:!0},o.a.createElement(x.a,null,t._id?o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(t._id,"?").concat((new Date).getTime()),className:e.bigAvatar}):o.a.createElement(k.a,null,o.a.createElement(W.a,null))),o.a.createElement(O.a,{primary:t.name}),o.a.createElement(w.a,null,o.a.createElement(U.a,null,o.a.createElement(Ne.a,null)))))})))):o.a.createElement(r.a,{to:"/signin"}))},Ae=Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",boxShadow:"none",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}})),_e=function(){var e=Ae(),t=Object(n.useState)({name:"",email:"",password:"",open:!1,error:""}),a=Object(c.a)(t,2),r=a[0],l=a[1],m=r.name,p=r.email,d=r.password,f=r.error,g=r.open,E=function(e){return function(t){l(Object(b.a)(Object(b.a)({},r),{},Object(L.a)({},e,t.target.value)))}};return o.a.createElement("div",{style:{paddingTop:60}},o.a.createElement(i.a,{className:e.card},o.a.createElement(s.a,null,o.a.createElement(u.a,{variant:"h6",className:e.title},"Sign Up"),o.a.createElement(me.a,{id:"name",label:"Name",className:e.textField,value:m,onChange:E("name"),margin:"normal"}),o.a.createElement("br",null),o.a.createElement(me.a,{id:"email",type:"email",label:"Email",className:e.textField,value:p,onChange:E("email"),margin:"normal"}),o.a.createElement("br",null),o.a.createElement(me.a,{id:"password",type:"password",label:"Password",className:e.textField,value:d,onChange:E("password"),margin:"normal"}),o.a.createElement("br",null),f&&o.a.createElement(u.a,{component:"p",color:"error"},f)),o.a.createElement(Z.a,null,o.a.createElement(T.a,{color:"primary",variant:"contained",onClick:function(e){var t;e.preventDefault(),l(Object(b.a)(Object(b.a)({},r),{},{error:!1})),(t={name:m,email:p,password:d},fetch("".concat(N,"/api/users/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){(null===e||void 0===e?void 0:e.error)?(l(Object(b.a)(Object(b.a)({},r),{},{error:e.error})),console.log("SIGNUP",f)):l(Object(b.a)(Object(b.a)({},r),{},{name:"",email:"",password:"",error:"",open:!0}))}))},className:e.submit},"Submit")),o.a.createElement(u.a,null,"Have an account?"," ",o.a.createElement(C.b,{to:"/signin",style:{textDecoration:"none"}},"Login"))),o.a.createElement(re.a,{open:g,disableBackdropClick:!0},o.a.createElement(se.a,null,"New Account"),o.a.createElement(le.a,null,o.a.createElement(ie.a,null,"New Account successfully created.")),o.a.createElement(ce.a,null,o.a.createElement(C.b,{to:"/signin",style:{textDecoration:"none"}},o.a.createElement(T.a,{color:"primary",autoFocus:"autoFocus",variant:"contained",style:{textTransform:"none"}},"Login")))))},Be=function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(N,"/auth/signout"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Fe=Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(2),paddingBottom:e.spacing(2),boxShadow:"none"},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}})),Ie=function(e){var t=Fe(),a=Object(n.useState)({email:"",password:"",error:"",redirect:!1}),l=Object(c.a)(a,2),m=l[0],p=l[1],d=m.email,f=m.password,g=m.error,E=m.redirect,h=function(e){return function(t){p(Object(b.a)(Object(b.a)({},m),{},Object(L.a)({error:!1},e,t.target.value)))}},y=(e.location.state||{from:{pathname:"/"}}).from;return E?o.a.createElement(r.a,{to:y}):o.a.createElement("div",{style:{paddingTop:100}},o.a.createElement(i.a,{className:t.card},o.a.createElement(s.a,null,o.a.createElement(u.a,{variant:"h6",className:t.title},"Sign In"),o.a.createElement(me.a,{id:"email",type:"email",label:"Email",className:t.textField,value:d,onChange:h("email"),margin:"normal"}),o.a.createElement("br",null),o.a.createElement(me.a,{id:"password",type:"password",label:"Password",className:t.textField,value:f,onChange:h("password"),margin:"normal"}),o.a.createElement("br",null),g&&o.a.createElement(u.a,{component:"p",color:"error"},g)),o.a.createElement(Z.a,null,o.a.createElement(T.a,{color:"primary",variant:"contained",onClick:function(e){var t;e.preventDefault(),p(Object(b.a)(Object(b.a)({},m),{},{error:!1})),(t={email:d,password:f},fetch("".concat(N,"/auth/signin/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){(null===e||void 0===e?void 0:e.error)?p(Object(b.a)(Object(b.a)({},m),{},{error:e.error})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){p(Object(b.a)(Object(b.a)({},m),{},{redirect:!0}))}))}))},className:t.submit},"Submit")),o.a.createElement(u.a,null,"New to PostMail?"," ",o.a.createElement(C.b,{to:"/signup",style:{textDecoration:"none"}},"Create an account"))))},ze=a(58),Pe=a.n(ze),Le=a(117),Ue=a.n(Le),He=function(e){var t=e.userId,a=Object(n.useState)(!1),l=Object(c.a)(a,2),i=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(c.a)(m,2),p=u[0],d=u[1],g=f(),h=(g.user,g.token),b=function(){s(!0)},y=function(){s(!1)};return p?o.a.createElement(r.a,{to:"/signup"}):o.a.createElement("span",null,o.a.createElement(E.a,{smDown:!0},o.a.createElement(U.a,{"aria-label":"Delete",onClick:b,color:"deleteIcon"},o.a.createElement(ee.a,{style:{color:"#1e88e5"}}))),o.a.createElement(E.a,{mdUp:!0},o.a.createElement(U.a,{"aria-label":"Delete",onClick:b,color:"deleteIcon",style:{marginRight:-20}},o.a.createElement(ee.a,{style:{color:"#1e88e5"}}))),o.a.createElement(re.a,{open:i,onClose:y},o.a.createElement(se.a,null,"Delete Account"),o.a.createElement(le.a,null,o.a.createElement(ie.a,null,"Confirm to delete your account.")),o.a.createElement(ce.a,null,o.a.createElement(T.a,{onClick:y,color:"primary"},"Cancel"),o.a.createElement(T.a,{onClick:function(){(function(e,t){return fetch("".concat(N,"/api/users/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t,h).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):(Be((function(){return console.log("deleted")})),d(!0))}))},color:"secondary",autoFocus:"autoFocus"},"Confirm"))))},We=a(95),Re=a.n(We),Je=a(96),Ge=a.n(Je),Me=function(e){var t=e.following,a=e.onButtonClick,n=e.name,r=function(){a(D)},c=function(){a(A)},l=function(){return B.b.info("You're following ".concat(n," now!"))};return o.a.createElement("div",null,t?o.a.createElement("div",null,o.a.createElement(E.a,{smDown:!0},o.a.createElement(T.a,{variant:"outlined",color:"primary",onClick:function(){c()},style:{textTransform:"none",width:100}},"Following")),o.a.createElement(E.a,{only:["xl","lg","md","xs"]},o.a.createElement(U.a,{onClick:function(){c()},"aria-label":"Unlike",style:{color:"#1976d2"}},o.a.createElement(Re.a,{style:{fontSize:30}}))),o.a.createElement(E.a,{smUp:!0},o.a.createElement(U.a,{onClick:function(){c()},"aria-label":"Unlike",style:{color:"#1976d2",marginRight:-15}},o.a.createElement(Re.a,{style:{fontSize:30}})))):o.a.createElement("div",null,o.a.createElement(E.a,{smDown:!0},o.a.createElement(T.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){r(),l()},style:{textTransform:"none",width:100}},"Follow")),o.a.createElement(E.a,{only:["xl","lg","md","xs"]},o.a.createElement(U.a,{onClick:function(){r(),l()},"aria-label":"Unlike",style:{color:"#1976d2"}},o.a.createElement(Ge.a,{style:{fontSize:30}}))),o.a.createElement(E.a,{smUp:!0},o.a.createElement(U.a,{onClick:function(){r(),l()},"aria-label":"Unlike",style:{color:"#1976d2",marginRight:-15}},o.a.createElement(Ge.a,{style:{fontSize:30}})))),o.a.createElement(B.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))},Ke=a(208),Ve=a(216),Ye=a(209),qe=a(206),Qe=a(207),Xe=Object(l.a)((function(e){return{root:{paddingTop:e.spacing(2),display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",background:e.palette.background.paper},bigAvatar:{width:50,height:50,margin:"auto"},gridList:{width:500,height:220},tileText:{textAlign:"center",marginTop:10,fontSize:13,color:"#3f4771"}}})),Ze=function(e){var t=e.people,a=Xe();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:a.root},o.a.createElement(E.a,{xsDown:!0},o.a.createElement(qe.a,{cellHeight:160,className:a.gridList,cols:4},t.map((function(e,t){return o.a.createElement(Qe.a,{style:{height:120},key:t},o.a.createElement(C.b,{to:"/user/".concat(e._id),style:{textDecoration:"none"}},o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(e._id),className:a.bigAvatar}),o.a.createElement(u.a,{className:a.tileText},e.name)))}))))),o.a.createElement("div",null,o.a.createElement(E.a,{smUp:!0},o.a.createElement(v.a,{style:{maxHeight:"auto"}},t.map((function(e,t){return o.a.createElement("span",{key:t},o.a.createElement(j.a,null,o.a.createElement(C.b,{to:"/user/".concat(e._id)},o.a.createElement(x.a,{className:a.avatar},o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(e._id),className:a.bigAvatar}))),o.a.createElement(C.b,{to:"/user/".concat(e._id),style:{textDecoration:"none",color:"#424242",fontSize:20}},o.a.createElement(O.a,{style:{whiteSpace:"nowrap"},primary:o.a.createElement(_.a,{component:"div",textOverflow:"ellipsis",overflow:"hidden"},o.a.createElement(u.a,{variant:"h6",style:{fontSize:13,marginLeft:25}},e.name))}))))}))))))},$e=function(e){var t=e.user,a=e.removePostUpdate,r=e.posts,l=Object(n.useState)(0),i=Object(c.a)(l,2),s=i[0],m=i[1];return o.a.createElement("div",null,o.a.createElement(Ke.a,{position:"static",color:"default"},o.a.createElement(Ve.a,{value:s,onChange:function(e,t){m(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},o.a.createElement(Ye.a,{label:o.a.createElement("div",{style:{display:"block",textTransform:"none"}},o.a.createElement("div",null,r.length),o.a.createElement("div",null,"Posts"))}),o.a.createElement(Ye.a,{label:o.a.createElement("div",{style:{display:"block",textTransform:"none"}},o.a.createElement("div",null,t.followers.length),o.a.createElement("div",null,"Followers"))}),o.a.createElement(Ye.a,{label:o.a.createElement("div",{style:{display:"block",textTransform:"none"}},o.a.createElement("div",null,t.following.length),o.a.createElement("div",null,"Following"))}))),0===s&&o.a.createElement(et,null,o.a.createElement(xe,{removeUpdate:a,posts:r})),1===s&&o.a.createElement(et,null,o.a.createElement(Ze,{people:t.followers})),2===s&&o.a.createElement(et,null,o.a.createElement(Ze,{people:t.following})))},et=function(e){var t=e.children;return o.a.createElement(u.a,{component:"div",style:{padding:16}},t)},tt=a(210),at=a(116),nt=a.n(at),ot=Object(l.a)((function(e){return{root:Object(L.a)({padding:"".concat(e.spacing(3),"px 0px 1px"),paddingTop:-53},e.breakpoints.down("sm"),{marginTop:70}),card:{maxWidth:600,margin:"auto",marginBottom:e.spacing(3),backgroundColor:"rgba(65, 150, 136, 0.09)"},cardContent:{backgroundColor:"white",paddingTop:0,paddingBottom:0},cardHeader:{paddingTop:8,paddingBottom:8},photoButton:{height:30,width:30,marginBottom:5},input:{display:"none"},textField:{marginLeft:e.spacing(2),marginRight:e.spacing(2),width:"90%",height:180},submit:{margin:e.spacing(2),float:"right",marginRight:20,textTransform:"none",width:120},filename:{verticalAlign:"super"}}})),rt=function(){var e=ot(),t=Object(n.useState)({text:"",photo:"",error:"",user:{}}),a=Object(c.a)(t,2),r=a[0],l=a[1],m=Object(n.useState)([]),p=Object(c.a)(m,2),d=p[0],g=p[1],y=f(),v=y.user,j=y.token;Object(n.useEffect)((function(){l(Object(b.a)(Object(b.a)({},r),{},{user:f().user}))}),[]);var x=function(){var e=new FormData;e.append("text",r.text),e.append("photo",r.photo),function(e,t,a){return fetch("".concat(N,"/api/posts/new/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(v._id,j,e).then((function(e){(null===e||void 0===e?void 0:e.error)?l(Object(b.a)(Object(b.a)({},r),{},{error:e.error})):(l(Object(b.a)(Object(b.a)({},r),{},{text:"",photo:""})),w())}))};Object(n.useEffect)((function(){var e=new AbortController,t=e.signal;return G(v._id,j,t).then((function(e){(null===e||void 0===e?void 0:e.error)?console.log(e.error):g(e)})),function(){e.abort()}}),[]);var w=function(e){var t=Object(z.a)(d);t.unshift(e),g(t)},O=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;l(Object(b.a)(Object(b.a)({},r),{},Object(L.a)({},e,a)))}},S=r.user._id||r.user.photo?o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(r.user._id,"?").concat((new Date).getTime()),className:e.bigAvatar}):o.a.createElement(U.a,null,o.a.createElement(W.a,null));return o.a.createElement("div",{style:{minHeight:600}},o.a.createElement(h.a,{maxwidth:"sm"},o.a.createElement(E.a,{smDown:!0},o.a.createElement("div",{style:{marginTop:90,marginLeft:20}},o.a.createElement(C.b,null,o.a.createElement(k.a,{style:{backgroundColor:"#f5f5f5",color:"#0d47a1"},onClick:function(){window.history.back()}},o.a.createElement(Pe.a,null))))),o.a.createElement("div",{className:e.root},o.a.createElement(i.a,{className:e.card},o.a.createElement(X.a,{avatar:S,title:r.user.name,className:e.cardHeader,style:{backgroundColor:"#e3edff"}}),o.a.createElement(s.a,{className:e.cardContent},o.a.createElement(me.a,{placeholder:"Share your thoughts ...",multiline:!0,rows:"8",value:r.text,onChange:O("text"),className:e.textField,margin:"normal"}),o.a.createElement("input",{accept:"image/*",onChange:O("photo"),className:e.input,id:"icon-button-file",type:"file"}),o.a.createElement("label",{htmlFor:"icon-button-file"},o.a.createElement(U.a,{color:"primary",className:e.photoButton,component:"span"},o.a.createElement(nt.a,null))),o.a.createElement("span",{className:e.filename},r.photo?r.photo.name:""),o.a.createElement(C.b,{to:"/",style:{textDecoration:"none"}},o.a.createElement(T.a,{disableElevation:!0,color:"primary",variant:"contained",disabled:""===r.text,onClick:function(){x()},className:e.submit},"Post")),r.error&&o.a.createElement(u.a,{component:"p",color:"error"},o.a.createElement(tt.a,{color:"error",className:e.error},"error"),r.error))))))},ct=Object(l.a)((function(e){return{root:e.mixins.gutters({maxWidth:600,minHeight:630,margin:"auto",padding:e.spacing(3),marginTop:e.spacing(1)}),title:{marginTop:e.spacing(3),color:e.palette.protectedTitle},bigAvatar:{width:60,height:60,margin:10}}})),lt=function(e){var t=e.match,a=(e.history,ct()),l=Object(n.useState)({user:{following:[],followers:[]},redirectToSignin:!1,following:!1}),i=Object(c.a)(l,2),s=i[0],m=i[1],p=Object(n.useState)([]),d=Object(c.a)(p,2),g=d[0],D=d[1],A=f(),_=A.user,B=A.token;Object(n.useEffect)((function(){var e=new AbortController;e.signal;return S(t.params.userId,B).then((function(e){if(null===e||void 0===e?void 0:e.error)m(Object(b.a)(Object(b.a)({},s),{},{redirectToSignin:!0}));else{var t=I(e);m(Object(b.a)(Object(b.a)({},s),{},{user:e,following:t})),F(e._id)}})),function(){e.abort()}}),[t.params.userId]);var F=function(e){(function(e,t){return fetch("".concat(N,"/api/posts/by/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,B).then((function(e){e.error?console.log(e.error):D(e)}))};if(s.redirectToSignin)return o.a.createElement(r.a,{to:"/signin"});var I=function(e){return e.followers.some((function(e){return e._id===f().user._id}))},z=s.user._id&&s.user.photo?o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(s.user._id,"?").concat((new Date).getTime()),className:a.bigAvatar}):o.a.createElement(U.a,null,o.a.createElement(W.a,null));return o.a.createElement("div",{style:{paddingTop:53}},o.a.createElement(h.a,{maxwidth:"sm"},o.a.createElement(E.a,{smDown:!0},o.a.createElement("div",{style:{marginTop:37,marginLeft:20}},o.a.createElement(C.b,null,o.a.createElement(k.a,{style:{backgroundColor:"#f5f5f5",color:"#0d47a1"},onClick:function(){window.history.back()}},o.a.createElement(Pe.a,null))))),o.a.createElement(y.a,{className:a.root,elevation:1},o.a.createElement(v.a,{dense:!0},o.a.createElement(j.a,null,o.a.createElement(x.a,null,z),o.a.createElement(O.a,{primary:s.user.name,secondary:s.user.email}),f().user&&f().user._id===s.user._id?o.a.createElement(w.a,null,o.a.createElement(E.a,{smDown:!0},o.a.createElement(C.b,{to:"/user/edit/".concat(_._id),style:{textDecoration:"none"}},o.a.createElement(T.a,{variant:"outlined",color:"primary",small:!0,style:{textTransform:"none",marginRight:5}},"Edit Profile"))),o.a.createElement(E.a,{mdUp:!0},o.a.createElement(C.b,{to:"/user/edit/".concat(_._id),style:{textDecoration:"none"}},o.a.createElement(U.a,{"aria-label":"Delete",color:"deleteIcon"},o.a.createElement(Ue.a,{style:{color:"#1e88e5"}})))),o.a.createElement(He,{userId:_._id})):o.a.createElement(Me,{following:s.following,onButtonClick:function(e){e(_._id,B,s.user._id).then((function(e){(null===e||void 0===e?void 0:e.error)?m(Object(b.a)(Object(b.a)({},s),{},{error:e.error})):m(Object(b.a)(Object(b.a)({},s),{},{user:e,following:!s.following}))}))},name:s.user.name})),o.a.createElement(P.a,{style:{marginTop:5,marginBottom:5}}),o.a.createElement(j.a,null,o.a.createElement(O.a,{primary:s.user.about,secondary:o.a.createElement(u.a,{variant:"caption",style:{color:"#8b98a4"}},"Joined ".concat(new Date(s.user.createdAt).toLocaleString("default",{month:"long",year:"numeric"})))}))),o.a.createElement($e,{user:s.user,posts:g,removePostUpdate:function(e){var t=g,a=t.indexOf(e);t.splice(a,1),D(t)}}))))},it=a(122),st=function(e){var t=e.component,a=Object(it.a)(e,["component"]);return o.a.createElement(r.b,Object.assign({},a,{render:function(e){return f()?o.a.createElement(t,e):o.a.createElement(r.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},mt=a(118),ut=a.n(mt),pt=Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},title:{margin:e.spacing(0),color:e.palette.protectedTitle},error:{verticalAlign:"middle"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)},bigAvatar:{width:60,height:60,margin:"auto"},input:{display:"none"},filename:{marginLeft:"10px"}}})),dt=function(e){var t=e.match,a=e.history,l=pt(),m=Object(n.useState)({name:"",password:"",email:"",about:"",photo:"",open:!1,error:"",id:"",redirectToProfile:!1}),p=Object(c.a)(m,2),d=p[0],g=p[1],E=d.name,h=d.email,y=d.password,v=d.about,j=d.photo,x=(d.id,d.open,d.error),w=d.redirectToProfile,O=f(),D=O.user,A=O.token;Object(n.useEffect)((function(){S(t.params.userId,A).then((function(e){(null===e||void 0===e?void 0:e.error)?g(Object(b.a)(Object(b.a)({},d),{},{error:e.error})):g(Object(b.a)(Object(b.a)({},d),{},{id:e._id,name:e.name,email:e.email,about:e.about}))}))}),[t.params.userId]);var _=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;g(Object(b.a)(Object(b.a)({},d),{},Object(L.a)({},e,a)))}};if(w)return o.a.createElement(r.a,{to:"/user/".concat(D._id)});return o.a.createElement("div",{style:{paddingTop:50}},o.a.createElement(i.a,{className:l.card},o.a.createElement("div",{style:{marginTop:30,marginLeft:30,position:"absolute"}},o.a.createElement(C.b,null,o.a.createElement(k.a,{style:{backgroundColor:"#f5f5f5",color:"#0d47a1"},onClick:function(){a.push("/user/".concat(D._id))}},o.a.createElement(Pe.a,null)))),o.a.createElement(s.a,null,o.a.createElement(u.a,{variant:"h6",className:l.title},"Edit Profile"),o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(d.id,"?").concat((new Date).getTime()),className:l.bigAvatar}),o.a.createElement("br",null),o.a.createElement("input",{accept:"image/*",onChange:_("photo"),className:l.input,id:"icon-button-file",type:"file"}),o.a.createElement("label",{htmlFor:"icon-button-file"},o.a.createElement(T.a,{variant:"outlined",color:"primary",component:"span",style:{textTransform:"none"},fontSize:"small"},"New Profile Photo",o.a.createElement(ut.a,{style:{paddingLeft:5}}))),o.a.createElement("span",{className:l.filename},j?j.name:""),o.a.createElement("br",null),o.a.createElement(me.a,{id:"name",label:"Name",className:l.textField,value:E,onChange:_("name"),margin:"normal"}),o.a.createElement("br",null),o.a.createElement(me.a,{id:"multiline-flexible",label:"About",multiline:!0,rows:"2",value:v,onChange:_("about"),className:l.textField,margin:"normal"}),o.a.createElement("br",null),o.a.createElement(me.a,{id:"email",type:"email",label:"Email",className:l.textField,value:h,onChange:_("email"),margin:"normal"}),o.a.createElement("br",null),o.a.createElement(me.a,{id:"password",type:"password",label:"Password",className:l.textField,value:y,onChange:_("password"),margin:"normal"}),o.a.createElement("br",null),x&&o.a.createElement(u.a,{component:"p",color:"error"},o.a.createElement(tt.a,{color:"error",className:l.error},"error"),x)),o.a.createElement(Z.a,null,o.a.createElement(T.a,{color:"primary",variant:"contained",onClick:function(e){e.preventDefault();var a=new FormData;E&&a.append("name",E),h&&a.append("email",h),y&&a.append("passoword",y),v&&a.append("about",v),j&&a.append("photo",j),function(e,t,a){return fetch("".concat(N,"/api/users/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,A,a).then((function(e){(null===e||void 0===e?void 0:e.error)?g(Object(b.a)(Object(b.a)({},d),{},{error:e.error})):g(Object(b.a)(Object(b.a)({},d),{},{redirectToProfile:!0}))}))},className:l.submit,style:{textTransform:"none",width:100}},"Submit"))))},ft=a(211),gt=a(121),Et=a(212),ht=a(119),bt=a.n(ht),yt=function(e,t){return e.location.pathname,{color:"#ffffff"}},vt=Object(r.g)((function(e){var t=e.history,a=o.a.useState(null),n=Object(c.a)(a,2),r=n[0],l=n[1];return o.a.createElement("div",null,o.a.createElement(Ke.a,{position:"fixed",color:"primary"},o.a.createElement(h.a,{maxwidth:"xs"},o.a.createElement(ft.a,null,o.a.createElement(E.a,{smDown:!0},o.a.createElement(u.a,{variant:"h6",color:"inherit"},"PostMail")),o.a.createElement(E.a,{mdUp:!0},o.a.createElement(u.a,{variant:"body1",color:"inherit"},"PostMail")),o.a.createElement("div",{style:{flexGrow:1}},o.a.createElement(E.a,{smDown:!0},o.a.createElement("div",{style:{marginLeft:30,display:"inline"}},o.a.createElement(C.b,{to:"/",style:{textDecoration:"none"}},o.a.createElement(T.a,{color:"inherit",style:(yt(t),{textTransform:"none",color:"#ffffff"})},"Home")))),o.a.createElement(E.a,{mdUp:!0},o.a.createElement("div",{style:{marginLeft:10,display:"inline"}},o.a.createElement(C.b,{to:"/",style:{textDecoration:"none"}},o.a.createElement(T.a,{color:"inherit",style:(yt(t),{textTransform:"none",color:"#ffffff"})},"Home")))),f()&&o.a.createElement(E.a,{lgUp:!0},o.a.createElement("div",{style:{marginLeft:5,display:"inline"}},o.a.createElement(C.b,{to:"/people",style:{textDecoration:"none"}},o.a.createElement(T.a,{color:"inherit",style:(yt(t),{textTransform:"none",color:"#ffffff"})},"People"))))),!f()&&o.a.createElement(_.a,{display:"flex",justifyContent:"flex-end"},o.a.createElement(C.b,{to:"/signup",style:{textDecoration:"none",marginRight:15}},o.a.createElement(T.a,{color:"inherit",style:(yt(t),{textTransform:"none",color:"#ffffff"})},"Sign up")),o.a.createElement(C.b,{to:"/signin",style:{textDecoration:"none"}},o.a.createElement(T.a,{color:"inherit",style:(yt(t),{textTransform:"none",color:"#ffffff"})},"Sign in"))),f()&&o.a.createElement(_.a,{display:"flex",justifyContent:"flex-end"},o.a.createElement(E.a,{smDown:!0},o.a.createElement(C.b,{to:"/user/".concat(f().user._id)},o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(f().user._id,"?").concat((new Date).getTime()),style:{marginRight:30}}))),o.a.createElement(E.a,{mdUp:!0},o.a.createElement(C.b,{to:"/user/".concat(f().user._id)},o.a.createElement(k.a,{src:"".concat(N,"/api/users/photo/").concat(f().user._id,"?").concat((new Date).getTime()),style:{marginRight:10,marginTop:6,height:35,width:35}}))),o.a.createElement(E.a,{smDown:!0},o.a.createElement(T.a,{color:"inherit",style:{textTransform:"none",color:"#ffffff"},onClick:function(){Be((function(){return t.push("/signin")}))}},"Log out")),o.a.createElement(E.a,{mdUp:!0},o.a.createElement(U.a,{"aria-label":"more","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},style:{marginRight:-12}},o.a.createElement(bt.a,{style:{color:"#ffffff"}})),o.a.createElement(gt.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){l(null)}},o.a.createElement(Et.a,{onClick:function(){Be((function(){return t.push("/signin")}))}},"Logout"))))))))})),jt=function(){return o.a.createElement("div",null,o.a.createElement(vt,null),o.a.createElement(r.d,null,o.a.createElement(r.b,{exact:!0,path:"/signup",component:_e}),o.a.createElement(r.b,{exact:!0,path:"/signin",component:Ie}),o.a.createElement(st,{exact:!0,path:"/",component:Te}),o.a.createElement(st,{exact:!0,path:"/users",component:De}),o.a.createElement(st,{exact:!0,path:"/post/create",component:rt}),o.a.createElement(st,{exact:!0,path:"/people",component:I}),o.a.createElement(st,{exact:!0,path:"/user/edit/:userId",component:dt}),o.a.createElement(r.b,{exact:!0,path:"/user/:userId",component:lt})))},xt=a(213),wt=a(120),Ot=Object(wt.a)({typography:{useNextVariants:!0},palette:{primary:{light:"#5c67a3",main:"#406fcf",dark:"#5183e8",contrastText:"#fff"},secondary:{light:"#ff79b0",main:"#f44336",dark:"#c60055",contrastText:"#000"},openTitle:"#3f4771",protectedTitle:"#ffffff",type:"light",unfollowButton:{main:"#fff",contrastText:"#3f4771"},deleteIcon:{light:"#e3f2fd ",main:"#bbdefb",dark:"#90caf9"},navbar:{main:"#4267b2"}}}),kt=function(){return o.a.createElement(C.a,null,o.a.createElement(xt.a,{theme:Ot},o.a.createElement(jt,null)))},Tt=a(13);a.n(Tt).a.render(o.a.createElement(kt,null),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.2309f487.chunk.js.map